# Object Detection을 활용한 스마트팜 시스템 개선 with 나래트랜드
## 프로젝트 소개
- 개발동기
    - ㈜나래트랜드의 주요 사업은 스마트팜(이하 반딧불이)가 있으며, 이는 농업 분야에 ICT 기술을 접목하고 과학적이고 편리한 기술 적용으로 농업기술 향상과 소득향상에 기여하는 시스템이다. 기업에서는 반딧불이 App과 함께 시스템 통합 데이터 클라우드 서버를 운영하여 관련 데이터 DB저장 및 사용자 편의를 위한 모니터링, 데이터 통계/분석이 가능하도록 서비스하는 중이다. 따라서 반딧불이 앱의 데이터를 통한 분석 및 시스템적 개선이 요구됐다.
    - 그 중 대상작물(딸기)의 경우 생육환경과 병해충에 민감하여 모니터링이 필요하며, CCTV를 통해 실시간으로 업로드되는 작물의 잎 이미지를 통해 해당 작물의 질병 유무를 판단하는 알고리즘의 구현을 필요로 했다.
- 목적
    - IOT기반 스마트팜 시스템 개발, 나래트랜드에서 현재 각 지역의 농장에 제공하고 있는 스마트팜 시스템 (이하 반딧불이)의 팜 노트(대시보드)를 개선
    - 각 지역의 농장주들의 효율적인 의사결정 지원
## 역할
- 참여인력: 3명
- 나의 역할
    - 아이디어 제안
    - OpenDataset의 좌표 레이블을 YOLOv5 형식에 맞게 변환
    - YOLOv5 튜닝 및 적용
## 데이터
- 기업 제공 데이터
    - 딸기 생육 이미지 및 영상 데이터
        - 매일 2회 촬영, 동영상 촬영
        - 수집 기간: 2022.11.10. - 2022.12.21.
- Open Dataset
    - DACON 작물 병해충 분류 대회 데이터
    - 13개의 작물과 30개의 클래스(diseased and healthy)로 이루어진 Roboflow PlantDoc Dataset
## 분석 과정
- 딸기 잎의 경우 6가지 질병으로 분류
    1. 잿빛 곰팡이 병 : 저온 다습조건에서 발병
    2. 흰 가루 병 : 일교차가 심할때주로 발병
    3. 꽃 곰팡이 병 : 상처 침입후발병
    4. 시들음병 : 토양의 후막포자가뿌리 침입
    5. 탄저병 : 병든 포기와 잔해물에 있던 병원균이 비, 관수에 의해 분생포자가이동하여 전염
    6. 역병 : 장마철에 발병 많음
- 6가지 질병 케이스를 사전 학습된 YOLOv5를 미세조정하여 object detection 하는 방식으로 진행
- 제공받은 딸기 생육 이미지 및 영상 데이터에서는 잎의 질병 상태가 뚜렷하게 나타나는 경우가 존재하지 않아 DACON 작물 병해충 분류 대회 데이터와 Roboflow PlantDoc Dataset을 이용하여 YOLOv5 학습
## 제안 방안
- 제안 방안
    - 현재 생육상태에서의 질병 데이터 확보 및 질병이 발생한 잎들에 대해서 추가적 레이블링 진행 후 지속적 모델 학습 ( Self Supervised Learning 진행 )
    - 현재 나래 트렌드 또는 농가 딸기 생육 환경에 학습된 모델로 구성된 Object Detection Device 을 부착하여 실시간으로 딸기 생육 상태를 확인하여 이상 증후 발생 시 알림이 가도록 설정 -> 모델은 지속적으로 Learning 진행
    - 추가적으로 농가 내 온도 또는 습도를 상황에 맞게 조절 하는 방안 제시
## 코드
- move_img&make_label.ipynb: opendataset을 본연구에 활용하기 위한 좌표 변환 코드
- plant_detection_yolo.ipynb: YOLOv5 튜닝 및 기업 제공 데이터 detection
